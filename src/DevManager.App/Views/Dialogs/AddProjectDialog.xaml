<Window x:Class="DevManager.App.Views.Dialogs.AddProjectDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:strings="clr-namespace:DevManager.App.Localization"
        Title="{x:Static strings:Strings.Dialog_AddProject_Title}"
        Width="700" Height="600"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="{x:Static strings:Strings.Dialog_AddProject_Header}"
                   Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                   Margin="0,0,0,16"/>

        <!-- Path + Browse + Scan -->
        <Grid Grid.Row="1" Margin="0,0,0,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="TxtPath"
                     materialDesign:HintAssist.Hint="{x:Static strings:Strings.Dialog_AddProject_PathHint}"
                     Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
            <Button Grid.Column="1" Content="..." Width="40" Margin="8,0,0,0"
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="BrowsePath_Click" ToolTip="{x:Static strings:Strings.Dialog_AddProject_BrowseFolder}"/>
            <Button Grid.Column="2" Content="{x:Static strings:Strings.Dialog_AddProject_Scan}" Margin="8,0,0,0"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Click="Scan_Click" ToolTip="{x:Static strings:Strings.Dialog_AddProject_ScanTooltip}"/>
        </Grid>

        <!-- Name -->
        <TextBox Grid.Row="2" x:Name="TxtName"
                 materialDesign:HintAssist.Hint="{x:Static strings:Strings.Dialog_AddProject_NameHint}"
                 Style="{StaticResource MaterialDesignOutlinedTextBox}"
                 Margin="0,0,0,12"/>

        <!-- Color -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,0,0,12">
            <TextBlock Text="{x:Static strings:Strings.Dialog_AddProject_Color}" VerticalAlignment="Center" Margin="0,0,12,0"/>
            <ComboBox x:Name="CmbColor" Width="200"
                      Style="{StaticResource MaterialDesignOutlinedComboBox}"
                      SelectedIndex="0">
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Blue}" Tag="#2196F3"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Red}" Tag="#F44336"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Green}" Tag="#4CAF50"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Orange}" Tag="#FF9800"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Purple}" Tag="#9C27B0"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Teal}" Tag="#009688"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Pink}" Tag="#E91E63"/>
                <ComboBoxItem Content="{x:Static strings:Strings.Color_Indigo}" Tag="#3F51B5"/>
            </ComboBox>
        </StackPanel>

        <CheckBox Grid.Row="4" x:Name="ChkAutoStart"
                  Content="{x:Static strings:Strings.Dialog_AddProject_AutoStart}"
                  Margin="0,0,0,8"/>

        <!-- Scan results header -->
        <TextBlock Grid.Row="5" x:Name="TxtScanStatus"
                   Text="{x:Static strings:Strings.Dialog_AddProject_ScanPrompt}"
                   FontSize="12" Opacity="0.7" Margin="0,4,0,8"/>

        <!-- Detected processes list -->
        <Border Grid.Row="6" BorderThickness="1" CornerRadius="4"
                BorderBrush="{DynamicResource MaterialDesignDivider}"
                Margin="0,0,0,12">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="LstProcesses">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="8,6" BorderThickness="0,0,0,1"
                                    BorderBrush="{DynamicResource MaterialDesignDivider}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}"
                                              VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="{Binding Definition.Name}"
                                                   FontWeight="SemiBold" FontSize="13"/>
                                        <TextBlock Opacity="0.6" FontSize="11" TextTrimming="CharacterEllipsis">
                                            <Run Text="{Binding Definition.Command, Mode=OneWay}"/>
                                            <Run Text=" "/>
                                            <Run Text="{Binding Definition.Arguments, Mode=OneWay}"/>
                                        </TextBlock>
                                        <TextBlock Text="{Binding Definition.WorkingDirectory}"
                                                   Opacity="0.4" FontSize="10" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="7" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="{x:Static strings:Strings.Dialog_AddProject_Cancel}" Style="{StaticResource MaterialDesignOutlinedButton}"
                    Margin="0,0,8,0" Click="Cancel_Click"/>
            <Button x:Name="BtnAdd" Content="{x:Static strings:Strings.Dialog_AddProject_Add}"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Click="Add_Click"/>
        </StackPanel>
    </Grid>
</Window>
